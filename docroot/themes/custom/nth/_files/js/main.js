!function(){"use strict";var t=function(t,i,o){var e;return function(){var r=this,n=arguments,s=function(){e=null,o||t.apply(r,n)},a=o&&!e;clearTimeout(e),e=setTimeout(s,i),a&&t.apply(r,n)}},i={$base:document.getElementById("base"),ctx:{},coords:[],brickHeight:14,brickWidth:14,shadeStep:2,currentCoord:{x:"",y:""},start:0,resizeDelay:250,software:"ianmoffitt.dev",mode:"gray",init:function(){this.load(),this.drawGrid(!0),window.addEventListener("resize",t(this.testDeb,this.resizeDelay).bind(this))},testDeb:function(){this.$base=document.getElementById("base"),this.resetCoords(),this.drawGrid(!0)},resetCoords:function(){for(var t=0;t<this.coords.length;t+=1)this.coords[t].changed=1},drawGrid:function(t){var i=this.$base,o=i.getContext("2d");void 0===t&&(t=!1),o.canvas.width=window.innerWidth,o.canvas.height=window.innerHeight,this.ctx=i,t?this.initialRender(this.coords,i):this.render(this.coords,i),window.requestAnimationFrame(this.frame.bind(this)),i.addEventListener("mousemove",function(t){this.currentCoord=this.getCoords(t.clientX,t.clientY)}.bind(this)),i.addEventListener("mouseleave",function(){this.currentCoord="",this.save()}.bind(this))},frame:function(t){window.requestAnimationFrame(this.frame.bind(this)),0===this.start&&(this.start=t);var i=t-this.start,o=this.ctx,e=this.coords;i>1e3&&(this.updateItem(this.currentCoord),this.render(e,o))},initialRender:function(t,i){for(var o=this,e=i.getContext("2d"),r=this.getXDimension(this.$base),n=this.getYDimension(this.$base),s=function(i){for(var n=function(r){var n="rgb(255,255,255)",s=t.filter((function(t){return t.x===r&&t.y===i&&1===t.changed}));s.length>0&&(n=s[0].color);var a=r*o.brickWidth,h=i*o.brickHeight,d=a+o.brickWidth,c=h+o.brickHeight;e.strokeStyle="rgba(221, 221, 221)",e.beginPath(),e.moveTo(a,h),e.lineTo(d,h),e.lineTo(d,c),e.lineTo(a,c),e.lineTo(a,h),e.fillStyle=n,e.stroke(),e.fill()},s=0;s<r;s+=1)n(s)},a=0;a<n;a+=1)s(a)},render:function(t,i){var o=i.getContext("2d");if(t.some((function(t){return t.changed}))){for(var e=0;e<t.length;e+=1)if(1===t[e].changed){var r=t[e].x*this.brickWidth,n=t[e].y*this.brickHeight,s=r+this.brickWidth,a=n+this.brickHeight;o.strokeStyle="rgba(221, 221, 221)",o.beginPath(),o.moveTo(r,n),o.lineTo(s,n),o.lineTo(s,a),o.lineTo(r,a),o.lineTo(r,n),o.fillStyle=t[e].color,o.fill(),o.stroke(),t[e].changed=0}this.coords=t}},getCoords:function(t,i){return{x:Math.floor(t/this.brickWidth),y:Math.floor(i/this.brickHeight)}},getXDimension:function(t){return Math.ceil((t.width+2*this.brickWidth)/this.brickWidth)},getYDimension:function(t){return Math.ceil(t.height/this.brickHeight)},updateItem:function(t){if(void 0!==t&&""!==t.x&&""!==t.y){var i=!1,o="rgb(250, 250, 250)";for(var e in this.coords)if(this.coords.hasOwnProperty(e)&&this.coords[e].x===t.x&&this.coords[e].y===t.y){i=!0,o=this.coords[e].color;var r=this.parseRgb(o);if("color"===this.mode)r=this.randomRgb(),this.coords[e].color="rgb("+r.r+","+r.g+","+r.b+")";else{var n=1*r.r;n>0&&(n<5?n=0:n-=this.shadeStep);var s=n,a=n;this.coords[e].color="rgb("+n+","+s+","+a+")"}this.coords[e].changed=1;break}i||this.coords.push({x:t.x,y:t.y,color:o,changed:1})}},load:function(){var t=this.getStorageKey(),i=window.localStorage.getItem(t),o=this.pxonToCoords(JSON.parse(i));if(o&&void 0!==o){for(var e=0;e<o.length;e+=1)o[e].changed=1;this.coords=o}},save:function(){var t=this.getStorageKey();if(void 0!==this.coords){var i=JSON.stringify(this.coordsToPxon(this.coords));window.localStorage.setItem(t,i)}},getStorageKey:function(){return window.location.hostname+"-"+window.location.pathname.replace("/","").replace(".","")+"-grid"},coordsToPxon:function(t){var o={exif:{software:i.software,artist:"",imageDescription:"",userComment:"",copyright:"",dateTime:""},pxif:{pixels:[]}},e={};for(var r in e=void 0!==t.data?t.data:t)o.pxif.pixels.push({x:e[r].x,y:e[r].y,color:e[r].color});return o},pxonToCoords:function(t){var i=[];if(t&&void 0!==t&&void 0!==t.pxif&&void 0!==t.pxif.pixels)for(var o in t.pxif.pixels)if(t.pxif.pixels.hasOwnProperty(o)){var e=t.pxif.pixels[o];e.changed=1,i.push(e)}return i},parseRgb:function(t){var i=t.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(",");return{r:i[0],g:i[1],b:i[2]}},randomRgb:function(){return{r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random())}},randomKey:function(t){var i=Object.keys(t);return i[Math.floor(i.length*Math.random())]}},o=i,e=window.$||window.jQuery||{};window.addEventListener("DOMContentLoaded",(function(){console.log("hello ian 1.0.1"),o.init(),e(document).foundation()}),!1)}();
//# sourceMappingURL=main.js.map