!function(){"use strict";var t=function(t,e,i){var o;return function(){var r=this,n=arguments,s=function(){o=null,i||t.apply(r,n)},a=i&&!o;clearTimeout(o),o=setTimeout(s,e),a&&t.apply(r,n)}},e={$base:document.getElementById("base"),ctx:{},coords:[],brickHeight:14,brickWidth:14,shadeStep:2,currentCoord:{x:"",y:""},start:0,resizeDelay:250,software:"ianmoffitt.dev",mode:"gray",init:function(){this.$base=document.getElementById("base"),this.load(),this.$base&&this.drawGrid(!0),window.addEventListener("resize",t(this.testDeb,this.resizeDelay).bind(this))},testDeb:function(){this.$base=document.getElementById("base"),this.resetCoords(),this.$base&&this.drawGrid(!0)},resetCoords:function(){for(var t=0;t<this.coords.length;t+=1)this.coords[t].changed=1},drawGrid:function(t){var e=this.$base,i=e.getContext("2d");void 0===t&&(t=!1),i.canvas.width=window.innerWidth,i.canvas.height=window.innerHeight,this.ctx=e,t?this.initialRender(this.coords,e):this.render(this.coords,e),window.requestAnimationFrame(this.frame.bind(this)),e.addEventListener("mousemove",function(t){this.currentCoord=this.getCoords(t.clientX,t.clientY)}.bind(this)),e.addEventListener("mouseleave",function(){this.currentCoord="",this.save()}.bind(this))},frame:function(t){window.requestAnimationFrame(this.frame.bind(this)),0===this.start&&(this.start=t);var e=t-this.start,i=this.ctx,o=this.coords;e>1e3&&(this.updateItem(this.currentCoord),this.render(o,i))},initialRender:function(t,e){for(var i=this,o=e.getContext("2d"),r=this.getXDimension(this.$base),n=this.getYDimension(this.$base),s=function(e){for(var n=function(r){var n="rgb(255,255,255)",s=t.filter((function(t){return t.x===r&&t.y===e&&1===t.changed}));s.length>0&&(n=s[0].color);var a=r*i.brickWidth,d=e*i.brickHeight,h=a+i.brickWidth,c=d+i.brickHeight;o.strokeStyle="rgba(221, 221, 221)",o.stroke(),o.beginPath(),o.moveTo(a,d),o.lineTo(h,d),o.lineTo(h,c),o.lineTo(a,c),o.lineTo(a,d),o.fillStyle=n,o.fill()},s=0;s<r;s+=1)n(s)},a=0;a<n;a+=1)s(a)},render:function(t,e){var i=e.getContext("2d");if(t.some((function(t){return t.changed}))){for(var o=0;o<t.length;o+=1)if(1===t[o].changed){var r=t[o].x*this.brickWidth,n=t[o].y*this.brickHeight,s=r+this.brickWidth,a=n+this.brickHeight;i.strokeStyle="rgba(221, 221, 221)",i.beginPath(),i.moveTo(r,n),i.lineTo(s,n),i.lineTo(s,a),i.lineTo(r,a),i.lineTo(r,n),i.fillStyle=t[o].color,i.fill(),i.stroke(),t[o].changed=0}this.coords=t}},getCoords:function(t,e){return{x:Math.floor(t/this.brickWidth),y:Math.floor(e/this.brickHeight)}},getXDimension:function(t){return Math.ceil((t.width+2*this.brickWidth)/this.brickWidth)},getYDimension:function(t){return Math.ceil(t.height/this.brickHeight)},updateItem:function(t){if(void 0!==t&&""!==t.x&&""!==t.y){var e=!1,i="rgb(250, 250, 250)";for(var o in this.coords)if(this.coords.hasOwnProperty(o)&&this.coords[o].x===t.x&&this.coords[o].y===t.y){e=!0,i=this.coords[o].color;var r=this.parseRgb(i);if("color"===this.mode)r=this.randomRgb(),this.coords[o].color="rgb("+r.r+","+r.g+","+r.b+")";else{var n=1*r.r;n>0&&(n<5?n=0:n-=this.shadeStep);var s=n,a=n;this.coords[o].color="rgb("+n+","+s+","+a+")"}this.coords[o].changed=1;break}e||this.coords.push({x:t.x,y:t.y,color:i,changed:1})}},load:function(){var t=this.getStorageKey(),e=window.localStorage.getItem(t),i=this.pxonToCoords(JSON.parse(e));if(i&&void 0!==i){for(var o=0;o<i.length;o+=1)i[o].changed=1;this.coords=i}},save:function(){var t=this.getStorageKey();if(void 0!==this.coords){var e=JSON.stringify(this.coordsToPxon(this.coords));window.localStorage.setItem(t,e)}},getStorageKey:function(){return window.location.hostname+"-"+window.location.pathname.replace("/","").replace(".","")+"-grid"},coordsToPxon:function(t){var i={exif:{software:e.software,artist:"",imageDescription:"",userComment:"",copyright:"",dateTime:""},pxif:{pixels:[]}},o={};for(var r in o=void 0!==t.data?t.data:t)i.pxif.pixels.push({x:o[r].x,y:o[r].y,color:o[r].color});return i},pxonToCoords:function(t){var e=[];if(t&&void 0!==t&&void 0!==t.pxif&&void 0!==t.pxif.pixels)for(var i in t.pxif.pixels)if(t.pxif.pixels.hasOwnProperty(i)){var o=t.pxif.pixels[i];o.changed=1,e.push(o)}return e},parseRgb:function(t){var e=t.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(",");return{r:e[0],g:e[1],b:e[2]}},randomRgb:function(){return{r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random())}},randomKey:function(t){var e=Object.keys(t);return e[Math.floor(e.length*Math.random())]}},i=e,o={trigger:".expand .content__header h1, .expand .content__header, .expand .content__trigger",init:function(){this.bindActions()},bindActions:function(){var t=this;document.addEventListener("click",(function(e){e.target.matches(t.trigger)&&t.toggle(e.target)}))},toggle:function(t){var e=t.closest(".expand");if(e){var i=e.querySelector(".expand__content"),o=i.querySelector(".user-markup");e.matches(".expand--open")?(i.style.maxHeight=null,e.classList.remove("expand--open"),e.classList.add("expand--closed")):e.matches(".expand--closed")&&(i.style.maxHeight=t.scrollHeight+o.scrollHeight+"px",e.classList.remove("expand--closed"),e.classList.add("expand--open"))}}},r=window.$||window.jQuery||{};window.addEventListener("DOMContentLoaded",(function(){console.log("hello ian 1.0.1"),i.init(),o.init(),r(document).foundation()}),!1)}();
//# sourceMappingURL=main.js.map