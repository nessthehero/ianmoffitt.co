var nth=nth||{};!function(a,b,c,d,e){"use strict";nth.grid={$base:a("#base"),brickHeight:10,brickWidth:10,hoverInterval:null,hoverStep:5,hoverDelay:10,gridIsActive:!1,init:function(){var a=this;if(c.MediaQuery.atLeast("medium")){for(var b=Math.ceil((a.$base.width()+2*a.brickWidth)/a.brickWidth),d=Math.ceil(a.$base.height()/a.brickHeight),e=0;e<d;e+=1){for(var f='<span class="r" id="r'+e+'">',g=0;g<b;g+=1)f+='<span class="b" id="b'+e+"-"+g+'"></span>';f+="</span>",a.$base.append(f)}a.bindEvents(),a.load()}},bindEvents:function(){var b=this;a(".b").on("mouseover",function(){var c=a(this);b.gridIsActive=!0,b.hoverInterval=setInterval(function(){var a=c.css("background-color"),d=a.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),e=1*d[0];e>0&&(e<b.hoverStep?e=0:e-=b.hoverStep);var f=e,g=e;c.css("background-color","rgb("+e.toString()+", "+f.toString()+", "+g.toString()+")")},b.hoverDelay)}).on("mouseout",function(){clearInterval(b.hoverInterval),b.gridIsActive=!1,setTimeout(b.save.bind(b),1e3)}).on("click",function(){a(this).css("background-color","rgb(255, 255, 255)")})},load:function(){var b=this.getStorageKey(),c=d.localStorage.getItem(b),e=JSON.parse(c);console.log("saved",e);for(var f in e.data)if(e.data.hasOwnProperty(f)){console.log(f,e.data[f]);var g="#"+f;a(g).css("background-color",e.data[f])}},save:function(){if(!this.gridIsActive){var b=this.$base.find(".r"),c={};if(b.length>0){b.each(function(){var b=a(this),d=b.find(".b[style]");d.length>0&&d.each(function(){var b=a(this).attr("id");c[b]=a(this).css("background-color")})});var e=this.getStorageKey();console.log(c);var f=JSON.stringify({data:c});console.log(f),d.localStorage.setItem(e,f)}}},getStorageKey:function(){return d.location.hostname+"-"+d.location.pathname.replace("/","").replace(".","")+"-grid"}}}(window.jQuery,window.Modernizr,window.Foundation,window,window.document),jQuery(function(){"use strict";nth.grid.init()});