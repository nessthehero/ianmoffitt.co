!function(i){var o={};function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=i,r.c=o,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([,function(t,e,i){"use strict";i.r(e);var o=function(o,r,n){var s;return function(){var t=this,e=arguments,i=n&&!s;clearTimeout(s),s=setTimeout(function(){s=null,n||o.apply(t,e)},r),i&&o.apply(t,e)}},r={$base:document.getElementById("base"),ctx:{},coords:[],brickHeight:14,brickWidth:14,shadeStep:2,currentCoord:{x:"",y:""},start:0,resizeDelay:250,software:"ianmoffitt.dev",init:function(){this.load(),this.drawGrid(!0),window.addEventListener("resize",o(this.testDeb,this.resizeDelay).bind(this))},testDeb:function(){this.$base=document.getElementById("base"),this.resetCoords(),this.drawGrid(!0)},resetCoords:function(){for(var t=0;t<this.coords.length;t+=1)this.coords[t].changed=1},drawGrid:function(t){var e=this.$base,i=e.getContext("2d");void 0===t&&(t=!1),i.canvas.width=window.innerWidth,i.canvas.height=window.innerHeight,this.ctx=e,t?this.initialRender(this.coords,e):this.render(this.coords,e),window.requestAnimationFrame(this.frame.bind(this)),e.addEventListener("mousemove",function(t){this.currentCoord=this.getCoords(t.clientX,t.clientY)}.bind(this)),e.addEventListener("mouseleave",function(){this.currentCoord="",this.save()}.bind(this))},frame:function(t){window.requestAnimationFrame(this.frame.bind(this)),0===this.start&&(this.start=t);var e=t-this.start,i=this.ctx,o=this.coords;1e3<e&&(this.updateItem(this.currentCoord),this.render(o,i))},initialRender:function(d,t){for(var c=this,h=t.getContext("2d"),e=this.getXDimension(this.$base),i=this.getYDimension(this.$base),o=0;o<i;o+=1)!function(a){for(var t=0;t<e;t+=1)!function(e){var t="rgb(255,255,255)",i=d.filter(function(t){return t.x===e&&t.y===a&&1===t.changed});0<i.length&&(t=i[0].color);var o=e*c.brickWidth,r=a*c.brickHeight,n=o+c.brickWidth,s=r+c.brickHeight;h.strokeStyle="rgba(221, 221, 221)",h.beginPath(),h.moveTo(o,r),h.lineTo(n,r),h.lineTo(n,s),h.lineTo(o,s),h.lineTo(o,r),h.fillStyle=t,h.fill(),h.stroke()}(t)}(o)},render:function(t,e){var i=e.getContext("2d");if(t.some(function(t){return t.changed})){for(var o,r,n,s,a=0;a<t.length;a+=1){1===t[a].changed&&(o=t[a].x*this.brickWidth,r=t[a].y*this.brickHeight,n=o+this.brickWidth,s=r+this.brickHeight,i.strokeStyle="rgba(221, 221, 221)",i.beginPath(),i.moveTo(o,r),i.lineTo(n,r),i.lineTo(n,s),i.lineTo(o,s),i.lineTo(o,r),i.fillStyle=t[a].color,i.fill(),i.stroke(),t[a].changed=0)}this.coords=t}},getCoords:function(t,e){return{x:Math.floor(t/this.brickWidth),y:Math.floor(e/this.brickHeight)}},getXDimension:function(t){return Math.ceil((t.width+2*this.brickWidth)/this.brickWidth)},getYDimension:function(t){return Math.ceil(t.height/this.brickHeight)},updateItem:function(t){if(void 0!==t&&""!==t.x&&""!==t.y){var e=!1,i="rgb(250, 250, 250)";for(var o in this.coords)if(this.coords.hasOwnProperty(o)&&this.coords[o].x===t.x&&this.coords[o].y===t.y){e=!0;var r=+(i=this.coords[o].color).replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(",")[0];0<r&&(r<5?r=0:r-=this.shadeStep),this.coords[o].color="rgb("+r+","+r+","+r+")",this.coords[o].changed=1;break}e||this.coords.push({x:t.x,y:t.y,color:i,changed:1})}},load:function(){var t=this.getStorageKey(),e=window.localStorage.getItem(t),i=this.pxonToCoords(JSON.parse(e));if(i&&void 0!==i){for(var o=0;o<i.length;o+=1)i[o].changed=1;this.coords=i}},save:function(){var t,e=this.getStorageKey();void 0!==this.coords&&(t=JSON.stringify(this.coordsToPxon(this.coords)),window.localStorage.setItem(e,t))},getStorageKey:function(){return window.location.hostname+"-"+window.location.pathname.replace("/","").replace(".","")+"-grid"},coordsToPxon:function(t){var e={exif:{software:r.software,artist:"",imageDescription:"",userComment:"",copyright:"",dateTime:""},pxif:{pixels:[]}},i={},i=void 0!==t.data?t.data:t;for(var o in i)e.pxif.pixels.push({x:i[o].x,y:i[o].y,color:i[o].color});return e},pxonToCoords:function(t){var e,i=[];if(t&&void 0!==t&&void 0!==t.pxif&&void 0!==t.pxif.pixels)for(var o in t.pxif.pixels){t.pxif.pixels.hasOwnProperty(o)&&((e=t.pxif.pixels[o]).changed=1,i.push(e))}return i}},n=r,s=window.$||window.jQuery||{};window.addEventListener("DOMContentLoaded",function(){console.log("hello ian 1.0.1"),n.init(),s(document).foundation()},!1)}]);
//# sourceMappingURL=main.js.map